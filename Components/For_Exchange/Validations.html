<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Validations - Alkahest</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../Alkahest.html"><strong aria-hidden="true">1.</strong> Alkahest</a></li><li class="chapter-item expanded "><a href="../../Introduction.html"><strong aria-hidden="true">2.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../Asides.html"><strong aria-hidden="true">3.</strong> Asides</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Components</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Components/For_Exchange.html"><strong aria-hidden="true">4.1.</strong> For Exchange</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Components/For_Exchange/Agreements.html"><strong aria-hidden="true">4.1.1.</strong> Agreements</a></li><li class="chapter-item expanded "><a href="../../Components/For_Exchange/Statements.html"><strong aria-hidden="true">4.1.2.</strong> Statements</a></li><li class="chapter-item expanded "><a href="../../Components/For_Exchange/Validations.html" class="active"><strong aria-hidden="true">4.1.3.</strong> Validations</a></li></ol></li><li class="chapter-item expanded "><a href="../../Components/For_Negotiation.html"><strong aria-hidden="true">4.2.</strong> For Negotiation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Components/For_Negotiation/Agents.html"><strong aria-hidden="true">4.2.1.</strong> Agents</a></li><li class="chapter-item expanded "><a href="../../Components/For_Negotiation/Markets.html"><strong aria-hidden="true">4.2.2.</strong> Markets</a></li><li class="chapter-item expanded "><a href="../../Components/For_Negotiation/Schemes.html"><strong aria-hidden="true">4.2.3.</strong> Schemes</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Examples</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.1.</strong> Exchange</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Examples/Exchange/Compute_Marketplace.html"><strong aria-hidden="true">5.1.1.</strong> Compute Marketplace</a></li><li class="chapter-item expanded "><a href="../../Examples/Exchange/Cooperative_MapReduce.html"><strong aria-hidden="true">5.1.2.</strong> Cooperative MapReduce</a></li><li class="chapter-item expanded "><a href="../../Examples/Exchange/Decentralized_SaaS_Provision.html"><strong aria-hidden="true">5.1.3.</strong> Decentralized SaaS Provision</a></li><li class="chapter-item expanded "><a href="../../Examples/Exchange/Decentralized_Vector_Database.html"><strong aria-hidden="true">5.1.4.</strong> Decentralized Vector Database</a></li><li class="chapter-item expanded "><a href="../../Examples/Exchange/Hello_World_-_Tokens_for_Strings.html"><strong aria-hidden="true">5.1.5.</strong> Hello World - Tokens for Strings</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.</strong> Negotiation</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Examples/Negotiation/Compute_Marketplace.html"><strong aria-hidden="true">5.2.1.</strong> Compute Marketplace</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Implementations</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Exchange</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.1.</strong> Agreements</div></li><li class="chapter-item expanded "><a href="../../Implementations/Exchange/IArbiter.html"><strong aria-hidden="true">6.1.2.</strong> IArbiter</a></li><li class="chapter-item expanded "><a href="../../Implementations/Exchange/IStatement.html"><strong aria-hidden="true">6.1.3.</strong> IStatement</a></li><li class="chapter-item expanded "><a href="../../Implementations/Exchange/IValidator.html"><strong aria-hidden="true">6.1.4.</strong> IValidator</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.5.</strong> Statements</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Implementations/Exchange/Statements/ERC20PaymentStatement.html"><strong aria-hidden="true">6.1.5.1.</strong> ERC20PaymentStatement</a></li><li class="chapter-item expanded "><a href="../../Implementations/Exchange/Statements/MultiStatement.html"><strong aria-hidden="true">6.1.5.2.</strong> MultiStatement</a></li><li class="chapter-item expanded "><a href="../../Implementations/Exchange/Statements/StringResultStatement.html"><strong aria-hidden="true">6.1.5.3.</strong> StringResultStatement</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.6.</strong> Validations</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Implementations/Exchange/Validations/MultiValidation.html"><strong aria-hidden="true">6.1.6.1.</strong> MultiValidation</a></li><li class="chapter-item expanded "><a href="../../Implementations/Exchange/Validations/OptimisticStringValidator.html"><strong aria-hidden="true">6.1.6.2.</strong> OptimisticStringValidator</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> Negotiation</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.1.</strong> Markets</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.2.</strong> Schemes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.3.</strong> Strategies</div></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../Whitepaper.html"><strong aria-hidden="true">7.</strong> Whitepaper</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Alkahest</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="validations"><a class="header" href="#validations">Validations</a></h1>
<p><strong>Validations</strong> represent properties of <strong>statements</strong> which are difficult to determine or cannot be determined via their raw data, and are often produced by third parties. They can be used for conditional finalization of terms in <strong>agreements</strong>.</p>
<p>Generally, validations are requested on [[Statements]] or other [[Validations]] by the underlying statement creator, and returned asynchronously in an event emission.</p>
<h2 id="requests"><a class="header" href="#requests">Requests</a></h2>
<p>Validation requests don't have a consistent abstract interface, because they can vary a lot based on what the validation is for. Often, they will accept statement or other other validation attestations to be validated, along with additional parameters specifying the properties to be validated if they aren't already defined in the base attestations.</p>
<h2 id="checks"><a class="header" href="#checks">Checks</a></h2>
<p>Validators implement [[IArbiter]], and their implementation of <code>checkStatement(Attestation memory statement, bytes memory demand, bytes32 counteroffer)</code> should be interpreted as checking a validation according to parametrized demands. The <code>counteroffer</code> UID is explicitly passed in because a demand is often specified in a counteroffer attestation, but it's impossible to know the UID of an attestation before it's created.</p>
<p>It's good practice to call <code>IArbiter(statement).checkStatement</code> inside a statement validator's implementation of <code>checkStatement</code>, so that [[Statements]] can specify a single arbiter as the source of truth inside finalization clauses.</p>
<h2 id="emission"><a class="header" href="#emission">Emission</a></h2>
<p>Often, validations must be produced asynchronously via a function call by an off-chain oracle or another contract. One way to implement this, as demonstrated in [[OptimisticStringValidator]], is optimistic mediation, where <code>checkStatement</code> is implemented to return valid after a given mediation period unless mediation is requested, in which case the validation attestation is revoked if it's invalid.</p>
<p>Another way is to produce the attestation asynchronously, only after validation actually happens. An event should be emitted when validations are produced if this architecture is used, but the event is not defined in [[IValidator]] (*subject to change), because architectural details vary too much per validation scheme.</p>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<ul>
<li>Oracle-based validators can have off-chain entities produce a validation attestation on request. E.g., to retry a deterministic compute job and verify its correctness</li>
<li>Reputation validators can accept collateral and produce positive validations for a particular entity's statements by default, while allowing authority oracles or a network of anonymous informers to revoke validations and slash collateral for entities that misbehave</li>
<li>Combination validators can accept several other validations and combine them into a single one - e.g., indicating that all of them are valid, or that their sum fulfills some condition</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../Components/For_Exchange/Statements.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../Components/For_Negotiation.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../Components/For_Exchange/Statements.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../Components/For_Negotiation.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
